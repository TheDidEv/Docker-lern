# Docker-lern üê≥
  [Course](https://www.linkedin.com/learning/docker-for-developers-14493163)
  [Course certificate](https://www.linkedin.com/learning/certificates/88a9de4164c2a1adaaafb69519b5adcb8a38a2f065b5c1e3d7b3dba5bcd2c2e1?lipi=urn%3Ali%3Apage%3Ad_flagship3_profile_view_base%3BxhnwvdL6SV2TiWufQzXeUg%3D%3D)

# Summary

## .dockerignore
–ïhis is an analogue of .gitignore but for docker

## Dockerfile
```bash
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –æ–±—Ä–∞–∑ Node.js —è–∫ –æ—Å–Ω–æ–≤—É
FROM node

# –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ä–æ–±–æ—á—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
WORKDIR /app

# –ö–æ–ø—ñ—é—î–º–æ —Ñ–∞–π–ª package.json –∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–±—ñ—Ä–∫–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
COPY package*.json ./

# –í–∏–∫–æ–Ω—É—î–º–æ –∫–æ–º–∞–Ω–¥—É `npm install` –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç—É(node_modules)
RUN npm install

# –ö–æ–ø—ñ—é—î–º–æ –≤—Å—ñ —Ñ–∞–π–ª–∏ —Ç–∞ –ø–∞–ø–∫–∏ –∑ –ø–æ—Ç–æ—á–Ω–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –∑–±—ñ—Ä–∫–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
COPY . .

# –ü–æ–∑–Ω–∞—á–∞—î–º–æ –ø–æ—Ä—Ç 4000 —è–∫ –ø–æ—Ä—Ç, –Ω–∞ —è–∫–æ–º—É –∑–∞–ø—É—â–µ–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
EXPOSE 4000

# –ö–æ–º–∞–Ω–¥–∞, —è–∫–∞ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –∑–∞–ø—É—Å–∫—É –¥–æ–¥–∞—Ç–∫—É
CMD ["npm", "start"]
```

–î–≤–∞ —Ä–∞–∑–∏ COPY, —Ç–æ–º—É —â–æ - —Ç–∞–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ–∑–≤–æ–ª—è—î –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å –∑–±—ñ—Ä–∫–∏ –æ–±—Ä–∞–∑—É Docker. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –æ–∫—Ä–µ–º–æ –ø–µ—Ä–µ–¥ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è–º —É—Å—ñ—Ö —Ñ–∞–π–ª—ñ–≤ –¥–æ–∑–≤–æ–ª—è—î —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è –∫–µ—à–µ–º –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (–≤ –¥–∞–Ω–æ–º—É –≤–∏–ø–∞–¥–∫—É, npm), –∑–º–µ–Ω—à—É—é—á–∏ —á–∞—Å –∑–±—ñ—Ä–∫–∏ –æ–±—Ä–∞–∑—É –≤ —Ä–∞–∑—ñ –∑–º—ñ–Ω –ª–∏—à–µ –≤ package.json.

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è image
```bash
docker build -t username/appname:1.0 . 
```
1.0 - version,  `username/appname` - –Ω–∞–∑–≤–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

–©–æ–± –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –≤—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ:
```bash
docker images
```

- Run container
–©–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–æ–º–∞–Ω–¥—É:
```bash
docker run -p 4000:4000 [image id repository]
```
repository - —Ü–µ –Ω–∞–∑–≤–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è. –î–∏–≤. –≤–∏—â–µ –≤ –ø—É–Ω–∫—Ç—ñ '–°—Ç–≤–æ—Ä–µ–Ω–Ω—è image'.

–©–æ–± –∑—É–ø–∏–Ω–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–∞–º–∞–Ω–¥—É:
```bash
docker stop [container name(id)]
#example: docker stop 0f83 (where 0f84 - firs 4 symbol on ID)
```

## docker-compose.yml

–ú–æ–∂–Ω–∞ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –≤ —Ü—å–æ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó –∑–∞ —à–ª—è—Ö–æ–º course->Resources->fullstack

Example docker-compose.yml:
```bash
version: '3.9'
services:
  client:
    container_name: client
    restart: always
    build: ./client
    ports: 
      - "3000:3000"
    links: 
      - app
  app:
    container_name: app
    restart: always
    build: ./api
    ports:
      - "4000:4000"
    depends_on:
     - mongo
  mongo: 
    container_name: mongo
    image: mongo
    restart: always
    expose:
      - "27017"
    volumes:
      - ./data:/data/db
    ports:
      - "27017:27017"
```

- client: 
`container_name:` –í—Å—Ç–∞–Ω–æ–≤–ª—é—î —ñ–º'—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è —Ü—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É —è–∫ "client".
`restart: always:` –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ä–∞–∑—ñ –π–æ–≥–æ –∑—É–ø–∏–Ω–∫–∏ –∞–±–æ –ø–æ–º–∏–ª–∫–∏.
`build: ./client:` –ó–∞–¥–∞—î —à–ª—è—Ö –¥–æ Dockerfile –∞–±–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–±—ñ—Ä–∫–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±—Ä–∞–∑—É —Ü—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É.
`ports:` –ú–∞–ø—É–≤–∞–Ω–Ω—è –ø–æ—Ä—Ç—ñ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç–∏ —Ö–æ—Å—Ç–∞. –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É, 3000 –ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–∞–ø—É—î—Ç—å—Å—è –Ω–∞ –ø–æ—Ä—Ç 3000 —Ö–æ—Å—Ç–∞.
`links:` –í—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–≤'—è–∑–æ–∫ –∑ —Å–µ—Ä–≤—ñ—Å–æ–º app.

- app:
`container_name:` –í—Å—Ç–∞–Ω–æ–≤–ª—é—î —ñ–º'—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è —Ü—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É —è–∫ "app".
`restart: always:` –Ø–∫ —ñ —É –≤–∏–ø–∞–¥–∫—É client, —Ü–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ä–∞–∑—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ.
`build:` ./api: –ó–∞–¥–∞—î —à–ª—è—Ö –¥–æ Dockerfile –∞–±–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–±—ñ—Ä–∫–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±—Ä–∞–∑—É —Ü—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É.
`ports:` –ú–∞–ø—É–≤–∞–Ω–Ω—è –ø–æ—Ä—Ç—ñ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç–∏ —Ö–æ—Å—Ç–∞. –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É, 4000 –ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–∞–ø—É—î—Ç—å—Å—è –Ω–∞ –ø–æ—Ä—Ç 4000 —Ö–æ—Å—Ç–∞.
`depends_on:` –í–∫–∞–∑—É—î –Ω–∞ —Ç–µ, —â–æ —Ü–µ–π —Å–µ—Ä–≤—ñ—Å (app) –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Å–µ—Ä–≤—ñ—Å—É mongo. –¶–µ –Ω–µ –æ–∑–Ω–∞—á–∞—î, —â–æ —Å–µ—Ä–≤—ñ—Å mongo –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–∞–ø—É—â–µ–Ω–∏–π, –ø—Ä–æ—Å—Ç–æ –¥–∞—î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–æ—á–µ–∫–∞—Ç–∏ –Ω–∞ –π–æ–≥–æ —Å—Ç–∞–Ω –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Ü—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É.

- mongo:
`container_name:` –í—Å—Ç–∞–Ω–æ–≤–ª—é—î —ñ–º'—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è —Ü—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É —è–∫ "mongo".
`image: mongo:` –í–∫–∞–∑—É—î Docker –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –æ–±—Ä–∞–∑ MongoDB –∑ Docker Hub.
`restart: always:` –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ MongoDB —É —Ä–∞–∑—ñ –π–æ–≥–æ –∑—É–ø–∏–Ω–∫–∏ –∞–±–æ –ø–æ–º–∏–ª–∫–∏.
`expose:` –í–∫–∞–∑—É—î –Ω–∞ —Ç–µ, —â–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ —Å–ª—É—Ö–∞—Ç–∏ –ø–æ—Ä—Ç 27017 –≤ –º–µ–∂–∞—Ö –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ó –º–µ—Ä–µ–∂—ñ Docker.
`volumes:` –ú–∞–ø—É–≤–∞–Ω–Ω—è —Ç–æ–º—ñ–≤ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö MongoDB. –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É, –¥–∞–Ω—ñ MongoDB –±—É–¥—É—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—ñ–π –ø–∞–ø—Ü—ñ ./data.
`ports:` –ú–∞–ø—É–≤–∞–Ω–Ω—è –ø–æ—Ä—Ç—ñ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç–∏ —Ö–æ—Å—Ç–∞. –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É, 27017 –ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–∞–ø—É—î—Ç—å—Å—è –Ω–∞ –ø–æ—Ä—Ç 27017 —Ö–æ—Å—Ç–∞.


- –í –¥–æ–∫–µ—Ä —Ñ–∞–π–ª–∞—Ö –≤ api —Ç–∞ client –ø–æ–≤–∏–Ω–Ω–æ –±—É–¥–∏ –≤–∫–∞–∑–∞–Ω–æ –≤ –ø–æ–ª—ñ ```WORKDIR``` —Ç–µ–∂ —Å–∞–º–µ —â–æ —ñ –≤ docker-compose –≤ –ø–æ–ª—ñ ```container_name:```
–Ω–∞–ø—Ä. –≤ api/Dockerfiel –≤ –ø–æ–ª—ñ –ø–æ–ª–µ ```WORKDIR: ./app``` —Ç–æ–¥—ñ –≤ docker-compose ```container_name: app```

—â–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Ü–µ –≤—Å–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏
```bash
# —Å–ø–æ—á–∞—Ç–∫—É –∑–∞–ø—É—Å–∫–∞—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å mongo, —Ç–æ–º—É —â–æ ap—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ñ–¥ –Ω—å–æ–≥–æ –∑–∞–ª–µ–∂–Ω–∏–π `depends_on:`- mongo(–¥–∏–≤ –≤–∏—â–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –≤ docker-compose.yml -> app)
docker-compose up -d mongo

# –¥–∞–ª—ñ –∑–∞–ø—É—Å–∫–∞—î–º–æ app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —Ç–æ–º—É —â–æ client –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–≤—è–∑–æ–∫ –∑ app —â–æ–± –±—Ä–∞—Ç–∏ –¥–∞–Ω—ñ –¥–ª—è –∫–ª—ñ—î–Ω—Ç–∞
docker-compose up -d app

# —Ç–µ–ø–µ—Ä –∑–∞–ø—É—Å–∫–∞—î–º–æ –∫–ª—ñ—î–Ω—Ç(–≤ –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤—ñ–Ω –Ω–∞ —Ä–µ–∞–∫—Ç)
docker-compose up -d client

# —â–æ–± –∑—É–ø–∏–Ω–∏—Ç–∏ –≤—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –ø–∏—à–µ–º–æ 
docker-compose stop
```

## –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

delete all images and containers: 
```bash
docker system prune -a
```

–ø–æ–¥–∏–≤–∏—Ç–∏—Å—å —è–∫—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –∑–∞–ø—É—â–µ–Ω—ñ:
```bash
docker ps
```

–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∏–ø–∏–Ω–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∞–ª–µ –Ω–µ –≤–∏—Ö–æ–¥–∏—Ç—å –∑—Ä–æ–±–∏—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É ```docker stop``` (–Ω–∞–ø—Ä. —Ü–∏–º –∫–æ–Ω—Ç–µ–π–Ω–æ—Ä–æ–º –∫–æ—Ä–∏—Å—Ç—É—î—Ç—å—Å—è –¥—Ä—É–≥–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä).
```bash
docker kill
```

—â–æ–± –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (container id - –º–æ–∂–Ω–∞ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é ```docker ps```):
```bash
docker logs [container id]
```

delete image:
```bash
docker rmi [image id]
```

info about docker
```bash
docker info
```


## Docker swarm
- Docker Swarm ‚Äì —Ü–µ –Ω–µ—Å–∫–ª–∞–¥–Ω–∏–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤, —è–∫–∏–π –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑ –∫–æ—Ä–æ–±–∫–∏. –ê–Ω–∞–ª–æ–≥ Kubernetis.

Initialize docker swarm:
```bash
docker swarm init
```
- –º–∏ –º–æ–∂–µ–º–æ –ø–æ–±–∞—á—Ç–∏ ID –Ω–∞—à–æ–≥–æ docker swarm –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–ª–º–∞–Ω–¥–∏ ```docker info``` -> ```NodeID: [some id]```

- –°–ø–∏—Å–æ–∫ –≤—É–∑–ª—ñ–≤ —É swarm:
```bash
docker node ls
```
